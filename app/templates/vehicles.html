{# app/templates/vehicles.html #}
{% extends "base.html" %}

{% block title %}Fleet Assets{% endblock %}

{% block content %}
<div class="content-wrapper">
  <!-- 1) Page header -->
  <section class="content-header">
    <div class="container-fluid">
      <h1>Fleet Assets</h1>
    </div>
  </section>

  <!-- 2) Main content -->
  <section class="content">
    <div class="container-fluid">

      <!-- 2a) Asset list card with tabs -->
      <div class="card">
        <div class="card-header p-2">
          <ul class="nav nav-pills">
            <li class="nav-item">
              <a class="nav-link active" href="#assets" data-bs-toggle="tab">Assets</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#pending" data-bs-toggle="tab">Pending Orders</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#inprogress" data-bs-toggle="tab">In-Progress Orders</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#completed" data-bs-toggle="tab">Completed Orders</a>
            </li>
          </ul>
        </div>
        <div class="card-body">
          <div class="tab-content">

            <!-- 2a.i) Assets tab -->
            <div class="tab-pane fade show active" id="assets">
              <!-- Search form (optional) -->
              <form method="get" class="mb-3">
                <div class="input-group">
                  <input
                    type="text"
                    name="q"
                    class="form-control"
                    placeholder="Search Make, Model, Unit No"
                    value="{{ q }}"
                  >
                  <button class="btn btn-primary">Search</button>
                </div>
              </form>

              <!-- Vehicle table -->
              <table id="vehicleTable" class="table table-striped">
                <thead>
                  <tr>
                    <th>Veh No</th>
                    <th>Tag No</th>
                    <th>Unit No</th>
                    <th>Year</th>
                    <th>Make</th>
                    <th>Model</th>
                  </tr>
                </thead>
                <tbody>
                  {% for v in vehicles %}
                  <tr>
                    <td><a href="{{ url_for('main.vehicle_detail', vehicle_id=v.id) }}">{{ v.veh_no }}</a></td>
                    <td>{{ v.tag_no }}</td>
                    <td>{{ v.unit_no }}</td>
                    <td>{{ v.year }}</td>
                    <td>{{ v.make }}</td>
                    <td>{{ v.model }}</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>

              <!-- Pagination links -->
              <nav aria-label="Vehicle pagination">
                <ul class="pagination justify-content-center">
                  {% if pagination.has_prev %}
                  <li class="page-item">
                    <a
                      class="page-link"
                      href="{{ url_for('main.home', page=pagination.prev_num, q=q) }}"
                    >« Prev</a>
                  </li>
                  {% else %}
                  <li class="page-item disabled"><span class="page-link">« Prev</span></li>
                  {% endif %}

                  <li class="page-item disabled">
                    <span class="page-link">
                      Page {{ pagination.page }} of {{ pagination.pages }}
                    </span>
                  </li>

                  {% if pagination.has_next %}
                  <li class="page-item">
                    <a
                      class="page-link"
                      href="{{ url_for('main.home', page=pagination.next_num, q=q) }}"
                    >Next »</a>
                  </li>
                  {% else %}
                  <li class="page-item disabled"><span class="page-link">Next »</span></li>
                  {% endif %}
                </ul>
              </nav>
            </div>

            <!-- 2a.ii) Other tabs (placeholders for later) -->
            <div class="tab-pane fade" id="pending">
              <p>Pending Orders…</p>
            </div>
            <div class="tab-pane fade" id="inprogress">
              <p>In-Progress Orders…</p>
            </div>
            <div class="tab-pane fade" id="completed">
              <p>Completed Orders…</p>
            </div>

          </div>
        </div>
      </div>

      <!-- 2b) Detail pane: fuel log & image/gauges -->
      <div class="row mt-4">
        <div class="col-md-8">
          <!-- You can later inject your fuel log or work order tables here -->
        </div>
        <div class="col-md-4">
          <!-- And your vehicle image + maintenance gauges here -->
        </div>
      </div>

    </div>
  </section>
</div>
{% endblock %}
